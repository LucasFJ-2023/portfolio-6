<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cafe Details</title>
</head>
<body>
<div id="cafeDetails"></div>
<script src="./frontend.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const urlParams = new URLSearchParams(window.location.search);
        const cafeId = urlParams.get('id');
        fetch(`/randomcafes`)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Failed to fetch');
                }
                return response.json();
            })
            .then(cafeData => {
                const cafeDetailsContainer = document.getElementById('cafeDetails');
                if (cafeData && Array.isArray(cafeData) && cafeData.length > 0) {
                    const cafe = cafeData.find(cafe => cafe.id === cafeId);
                    if (cafe) {
                        cafeDetailsContainer.innerHTML = `
                            <h2>${cafe.cafe_name}</h2>
                            <p>Address: ${cafe.address}, ${cafe.city}</p>
                            <p>Description: ${cafe.description}</p>
                        `;
                    } else {
                        console.error(`Cafe with ID ${cafeId} not found`);
                    }
                } else {
                    console.error('Invalid cafe data or empty array');
                }
            })
            .catch(error => {
                console.error('Error fetching cafe details:', error);
            });
    });
</script>
</body>
</html>
